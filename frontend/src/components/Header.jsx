import { Link, Navigate, Outlet } from 'react-router-dom'
import logoManta from '/logoMantaHills.png'
import { useContext } from 'react'
import AuthContext from '../context/AuthProvider'
export default function Header(){
    const {auth, setAuth} = useContext(AuthContext)
    const isAuth = localStorage.getItem('token')
    return(
        <>
        <header>
			<nav className="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800">
				<div className="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl">
					<a href="/" className="flex items-center">
						<img src={logoManta} className="mr-3 h-10 sm:h-16 w-auto" alt="Manta Hills S.C Logo" />
					</a>
					<div className="flex items-center lg:order-2">
						<button 
                            onClick={()=>{localStorage.removeItem('token'); setAuth({})}} 
                            className="text-white bg-primary-700 hover:bg-primary-800 focus:ring-4 focus:ring-primary-300 font-medium rounded-lg text-sm mx-4 lg:mx-5 py-2 lg:my-2.5 mr-2 dark:bg-primary-600 dark:hover:bg-primary-700 focus:outline-none dark:focus:ring-primary-800">
							Cerrar Sesi√≥n
						</button>
                        {auth.rol === "admin" &&
                            <Link to="/admin">
                                <svg width="25" height="25" viewBox="0 0 45 45" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <g clipPath="url(#clip0_129_435)">
                                    <path d="M24.9254 0C25.5868 0 26.1786 0.41175 26.4014 1.02825L27.9898 5.4315C28.5583 5.5725 29.0488 5.7165 29.4613 5.8635C29.9113 6.024 30.4963 6.2715 31.2163 6.606L34.9153 4.6485C35.2171 4.48781 35.5629 4.42966 35.9006 4.48283C36.2383 4.536 36.5496 4.69761 36.7874 4.94325L40.0409 8.307C40.4729 8.75475 40.5944 9.4095 40.3514 9.981L38.6166 14.0468C38.9031 14.5747 39.1341 15.0278 39.3096 15.4058C39.4986 15.8153 39.7326 16.3853 40.0116 17.1157L44.0549 18.8482C44.6623 19.107 45.0381 19.7145 44.9976 20.3647L44.7006 25.0335C44.6803 25.3368 44.5714 25.6275 44.3874 25.8695C44.2034 26.1115 43.9524 26.2941 43.6656 26.3948L39.8361 27.756C39.7266 28.284 39.6111 28.7385 39.4896 29.1195C39.293 29.71 39.0692 30.2911 38.8191 30.861L40.7429 35.1135C40.8797 35.4121 40.9168 35.7468 40.8488 36.0681C40.7807 36.3894 40.611 36.6803 40.3649 36.8978L36.7063 40.1647C36.4659 40.3799 36.1652 40.5159 35.8448 40.5546C35.5245 40.5932 35.2001 40.5325 34.9153 40.3808L31.1444 38.3828C30.555 38.6964 29.9462 38.9722 29.3218 39.2085L27.6749 39.825L26.2123 43.875C26.1029 44.1709 25.9071 44.4271 25.6504 44.6105C25.3936 44.7938 25.0877 44.8958 24.7724 44.9033L20.4973 45C20.1735 45.0075 19.8552 44.915 19.5858 44.735C19.3164 44.555 19.1091 44.2963 18.9921 43.9942L17.2686 39.4335C16.6807 39.2321 16.0985 39.0145 15.5226 38.781C15.0517 38.5772 14.5879 38.3573 14.1321 38.1217L9.8571 39.9487C9.57553 40.0695 9.26484 40.1055 8.96312 40.0523C8.66139 39.9992 8.38171 39.8592 8.15835 39.6495L4.99485 36.6817C4.75844 36.4623 4.59742 36.1738 4.53479 35.8574C4.47216 35.541 4.51112 35.2129 4.6461 34.92L6.48435 30.915C6.24074 30.4402 6.01409 29.9569 5.80485 29.466C5.56111 28.8648 5.33601 28.2563 5.12985 27.6413L1.10235 26.415C0.774977 26.3161 0.489438 26.1118 0.290077 25.8339C0.0907168 25.556 -0.011307 25.2201 -0.000149757 24.8783L0.15735 20.556C0.169051 20.2741 0.257344 20.0007 0.412743 19.7653C0.568142 19.5298 0.784771 19.3411 1.03935 19.2195L5.26485 17.19C5.45985 16.473 5.63235 15.912 5.78235 15.507C5.99464 14.9631 6.23036 14.4286 6.48885 13.905L4.65735 10.035C4.5173 9.74133 4.47452 9.41066 4.53521 9.09102C4.5959 8.77137 4.75691 8.4794 4.99485 8.2575L8.15385 5.274C8.375 5.06464 8.6521 4.92389 8.95161 4.86878C9.25111 4.81367 9.56016 4.84657 9.84135 4.9635L14.1119 6.7275C14.5829 6.414 15.0119 6.156 15.3989 5.9535C15.8594 5.7105 16.4774 5.451 17.2529 5.175L18.7379 1.03275C18.8487 0.730332 19.0497 0.469187 19.3136 0.284523C19.5775 0.0998584 19.8917 0.000554871 20.2139 0L24.9254 0ZM22.5539 15.7928C18.8031 15.7928 15.7634 18.7965 15.7634 22.5045C15.7634 26.2125 18.8031 29.2185 22.5539 29.2185C26.3046 29.2185 29.3421 26.2125 29.3421 22.5045C29.3421 18.7965 26.3046 15.7928 22.5539 15.7928Z" fill="white"/>
                                    </g>
                                    <defs>
                                    <clipPath id="clip0_129_435">
                                    <rect width="45" height="45" fill="white"/>
                                    </clipPath>
                                    </defs>
                                </svg>
                            </Link>
                        }
                        <Link to="/profile" className='mx-1'>
                        <svg width="25" height="25" viewBox="0 0 45 45" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <g clipPath="url(#clip0_129_422)">
                            <path d="M22.4998 38.4C16.979 38.4 12.0986 35.5734 9.24984 31.3334C9.31609 26.9167 18.0832 24.4875 22.4998 24.4875C26.9165 24.4875 35.6836 26.9167 35.7498 31.3334C34.2902 33.5075 32.3181 35.2893 30.0075 36.5216C27.6968 37.754 25.1186 38.3991 22.4998 38.4ZM22.4998 7.04169C24.2569 7.04169 25.942 7.73968 27.1844 8.98211C28.4269 10.2245 29.1248 11.9096 29.1248 13.6667C29.1248 15.4237 28.4269 17.1088 27.1844 18.3513C25.942 19.5937 24.2569 20.2917 22.4998 20.2917C20.7428 20.2917 19.0577 19.5937 17.8153 18.3513C16.5728 17.1088 15.8748 15.4237 15.8748 13.6667C15.8748 11.9096 16.5728 10.2245 17.8153 8.98211C19.0577 7.73968 20.7428 7.04169 22.4998 7.04169ZM22.4998 0.416687C19.5998 0.416687 16.7282 0.987889 14.0489 2.09768C11.3696 3.20747 8.93519 4.83412 6.88456 6.88475C2.74313 11.0262 0.416504 16.6432 0.416504 22.5C0.416504 28.3569 2.74313 33.9739 6.88456 38.1153C8.93519 40.1659 11.3696 41.7926 14.0489 42.9024C16.7282 44.0122 19.5998 44.5834 22.4998 44.5834C28.3567 44.5834 33.9737 42.2567 38.1151 38.1153C42.2565 33.9739 44.5832 28.3569 44.5832 22.5C44.5832 10.2879 34.6457 0.416687 22.4998 0.416687Z" fill="white"/>
                            </g>
                            <defs>
                            <clipPath id="clip0_129_422">
                            <rect width="45" height="45" fill="white"/>
                            </clipPath>
                            </defs>
                        </svg>
                        </Link>

					</div>
				</div>
			</nav>
		</header>
        {isAuth ? <Outlet /> : <Navigate to={'/login'} />}
        
        </>
    )
}